(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,a,t){},30:function(e,a,t){e.exports=t(68)},58:function(e,a,t){},59:function(e,a,t){},63:function(e,a,t){},64:function(e,a,t){},65:function(e,a,t){},66:function(e,a,t){},67:function(e,a,t){},68:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(27),o=t.n(r),s=t(5),i=t(70),c=t(29),u=t(7),m=t(14),d=t(3),p=t.n(d),f={getFamily:function(e){return p.a.post("/api/family/getfamily",e)},getFamilyMember:function(e){return p.a.get("/api/family/"+e)},deleteFamily:function(e){return p.a.post("/api/family/delete",e)},saveFamily:function(e){return p.a.post("/api/family",e)},login:function(e){return console.log("API sees login..."),console.log(e),p.a.post("/api/user/login",e)},setUser:function(e){return console.log("API sees setUser..."),console.log(e),p.a.post("/api/family/setuser",e)},newUser:function(e){return p.a.post("/api/user/new",e)},scrapeFamily:function(e){return p.a.post("/api/family/scrape",e)},toggleIsSaved:function(e){return p.a.put("/api/events/toggle",e)},getEvents:function(e){return p.a.post("/api/events/saved",e)},getAnswerKey:function(){return p.a.get("/api/events/answerkey")},getUserPlus:function(e){return p.a.post("/api/user/getuserplus",e)}},h=t(53);t(56);var v=h.initializeApp({apiKey:"AIzaSyAtA9G5LKdN9d-Gq_aEAeMTH2bM_2J6Amg",authDomain:"family-reunion-helper.firebaseapp.com",databaseURL:"https://family-reunion-helper.firebaseio.com",projectId:"family-reunion-helper",storageBucket:"family-reunion-helper.appspot.com",messagingSenderId:"169387949450",appId:"1:169387949450:web:5826302c59bd3deef51c73"}),g=function(e,a){return v.auth().signInWithEmailAndPassword(e,a).then(function(e){console.log(e),console.log(v.auth().currentUser.providerData[0].email)}).catch(function(e){var a=e.message;console.log(a),alert(a)})};var E=function(e,a){var t=l.a.useState(e),n=Object(s.a)(t,2),r=n[0],o=n[1],i=l.a.useState({}),c=Object(s.a)(i,2),d=c[0],p=c[1],h=l.a.useState(!1),g=Object(s.a)(h,2),E=g[0],b=g[1],y=l.a.useState(!0),w=Object(s.a)(y,2),N=w[0],S=w[1];return l.a.useEffect(function(){var e=Boolean(d.email),a=Boolean(d.password),t=!e&&!a,n=r.email&&r.password;E?t?(console.log("Authenticated!",r.email,r.password),console.log(v.auth().user),f.login({email:v.auth().user.email,password:r.password}).then(function(e){200===e.status&&null==e.data[0]?f.NewUser({email:r.email,password:r.password}).then(function(e){console.log(e.data)}).catch({}):e.data[0].password===r.password?console.log("valid"):console.log("NOT valid: "+e.data[0].password+"<>"+r.password)}).catch(function(e){return console.log(e)}),b(!1)):b(!1):S(!t||!n)},[d,E,N,r.password,r.email]),{handleSubmit:function(e){e.preventDefault();var t=a(r);p(t),b(!0)},handleChange:function(e){if(o(Object(m.a)({},r,Object(u.a)({},e.target.name,e.target.value))),d.email||d.password){var t=a(r);p(t)}},handleBlur:function(){var e=a(r);p(e)},errors:d,isSubmitting:E,cantSub:N,values:r}};function b(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required Email",e.password?e.password.length<6&&(a.password="Password must be at least 6 characters"):a.password="Required Password",a}function y(e){return l.a.createElement("div",{className:"form-group"},l.a.createElement("input",Object.assign({className:"form-control"},e)))}function w(e){return l.a.createElement("button",Object.assign({},e,{style:{float:"right",marginBottom:10,marginLeft:10},className:"btn btn-success"}),e.children)}function N(e){var a=e.fluid,t=e.children;return l.a.createElement("div",{className:"container".concat(a?"-fluid":"")},t)}function S(e){var a=e.fluid,t=e.children;return l.a.createElement("div",{className:"row".concat(a?"-fluid":"")},t)}function k(e){var a=e.size,t=e.children;return l.a.createElement("div",{className:a.split(" ").map(function(e){return"col-"+e}).join(" ")},t)}t(58);var O=function(e){var a=e.children;return l.a.createElement("div",{style:{height:100,clear:"both",paddingTop:15},className:"jumbotron"},a)},j=t(71),C=(t(59),{email:"",password:""});var D=function(e){var a=function(a,t,n){a&&a.preventDefault(),g(t,n).then(function(a){v.auth().currentUser.providerData[0].email&&e.history.push("/add")})},t=E(C,b),n=t.handleChange,r=t.handleBlur,o=t.errors,s=t.cantSub,i=t.values;return l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12"},l.a.createElement(O,null,l.a.createElement("h1",null,"Login")),l.a.createElement("form",null,l.a.createElement(y,{onChange:n,onBlur:r,name:"email",value:i.email,autoComplete:"off",placeholder:"Your email address",style:o.email?{border:"1px solid red",marginBottom:"0rem"}:{border:"1px solid #ced4da",marginBottom:"0rem"}}),l.a.createElement("div",{className:"errorText"},o.email?l.a.createElement("p",null,o.email):l.a.createElement("p",null,"\xa0")),l.a.createElement(y,{onChange:n,onBlur:r,name:"password",type:"password",value:i.password,placeholder:"Choose a safe password",style:o.password?{border:"1px solid red"}:{border:"1px solid #ced4da"}}),l.a.createElement("div",{className:"errorText"},o.password?l.a.createElement("p",null,o.password):l.a.createElement("p",null,"\xa0")),l.a.createElement("div",null,l.a.createElement(w,{onClick:function(e){return a(e,i.email,i.password)},disabled:s,type:"submit"},"Submit")),l.a.createElement("button",{type:"button",onClick:function(){a(null,"crystal@bell.com","1234567")}},'login "crystal"'),l.a.createElement("button",{type:"button",onClick:function(){a(null,"migelrodregiz12@yahoo.com","1234567")}},'login "migel"')),l.a.createElement(j.a,{to:"/signup"},"Sign Up"))))};var A=function(e,a){var t=l.a.useState(e),n=Object(s.a)(t,2),r=n[0],o=n[1],i=l.a.useState({}),c=Object(s.a)(i,2),d=c[0],p=c[1],h=l.a.useState(!1),v=Object(s.a)(h,2),g=v[0],E=v[1],b=l.a.useState(!0),y=Object(s.a)(b,2),w=y[0],N=y[1];return l.a.useEffect(function(){var e=Boolean(d.email),a=Boolean(d.password),t=!e&&!a,n=r.email&&r.password;g?t?(console.log("Authenticated!",r.email,r.password),f.login({email:r.email,password:r.password}).then(function(e){200===e.status&&null==e.data[0]?f.NewUser({email:r.email,password:r.password}).then(function(e){console.log(e.data)}).catch({}):e.data[0].password===r.password?(console.log("valid"),f.setUser({id:e.data[0]._id})):console.log("NOT valid: "+e.data[0].password+"<>"+r.password)}).catch(function(e){return console.log(e)}),E(!1)):E(!1):N(!t||!n)},[d,g,w,r.password,r.email]),{handleSubmit:function(e){e.preventDefault();var t=a(r);p(t),E(!0)},handleChange:function(e){if(o(Object(m.a)({},r,Object(u.a)({},e.target.name,e.target.value))),d.email||d.password){var t=a(r);p(t)}},handleBlur:function(){var e=a(r);p(e)},errors:d,isSubmitting:g,cantSub:w,values:r}};function x(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required Email",e.password?e.password.length<6&&(a.password="Password must be at least 6 characters"):a.password="Required Password",a}t(63);var F={email:"",password:""},U=function(e,a,t){e.preventDefault(),function(e,a){return v.auth().createUserWithEmailAndPassword(e,a).then(function(e){console.log(e),console.log(v.auth()),console.log(v.auth().currentUser)}).catch(function(e){console.log(e)})}(a,t).then(f.newUser({email:a}).then(function(e){console.log(e.data)}))};var _=function(e){var a=A(F,x),t=a.handleChange,n=a.handleBlur,r=a.errors,o=a.cantSub,s=a.values;return l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12"},l.a.createElement(O,null,l.a.createElement("h1",null,"Sign Up")),l.a.createElement("form",null,l.a.createElement(y,{onChange:t,onBlur:n,name:"email",value:s.email,autoComplete:"off",placeholder:"Your email address",style:r.email?{border:"1px solid red",marginBottom:"0rem"}:{border:"1px solid #ced4da",marginBottom:"0rem"}}),l.a.createElement("div",{className:"errorText"},r.email?l.a.createElement("p",null,r.email):l.a.createElement("p",null,"\xa0")),l.a.createElement(y,{onChange:t,onBlur:n,name:"password",type:"password",value:s.password,placeholder:"Choose a safe password",style:r.password?{border:"1px solid red"}:{border:"1px solid #ced4da"}}),l.a.createElement("div",{className:"errorText"},r.password?l.a.createElement("p",null,r.password):l.a.createElement("p",null,"\xa0")),l.a.createElement("div",null,l.a.createElement(w,{onClick:function(e){return U(e,s.email,s.password)},disabled:o,type:"submit"},"Submit"))),l.a.createElement(j.a,{to:"/login"},"Login"))))},I=t(8),B=t(9),R=t(11),L=t(10),M=t(12);t(64);function P(e){var a=e.children;return l.a.createElement("div",{className:"list-overflow-container",style:T},l.a.createElement("ul",{className:"list-group"},a))}var T={border:"1px #DDDDDD solid",overflowY:"scroll"};function z(e){var a=e.children;return l.a.createElement("li",{className:"list-group-item"},a)}function q(e){var a=e.children;return l.a.createElement("div",{className:"list-overflow-container"},l.a.createElement("ul",{className:"list-group list-group-flush"},a))}function K(e){var a=e.children;return l.a.createElement("li",{className:"list-group-item"},a)}function Z(e){var a=e.children;return l.a.createElement("div",{className:"list-group"},l.a.createElement("div",{className:"list-group-item-action active"},a))}function H(e){var a=e.children;return l.a.createElement("div",{className:"list-group-item list-group-item-action"},a)}t(65);var J=function(e){function a(){var e,t;Object(I.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(R.a)(this,(e=Object(L.a)(a)).call.apply(e,[this].concat(l)))).state={people:[]},t.loadFamily=function(){f.getUserPlus({email:v.auth().currentUser.providerData[0].email}).then(function(e){return t.setState({people:e.data[0].family})}).catch(function(e){return console.log(e)})},t.toggleIsSaved=function(e){console.log("eventItem"),e.isSaved=!e.isSaved,f.toggleIsSaved(e).then(function(e){return t.loadFamily()}).catch(function(e){return console.log(e)})},t}return Object(M.a)(a,e),Object(B.a)(a,[{key:"componentDidMount",value:function(){v.auth().currentUser&&this.loadFamily()}},{key:"render",value:function(){var e=this;return l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12 sm-12"},l.a.createElement(O,null,l.a.createElement("h1",null,"Cull Events"),l.a.createElement("p",null,"Select events to include")),this.state.people.length?l.a.createElement(q,null,this.state.people.map(function(a){return l.a.createElement(K,{key:a._id},l.a.createElement("strong",null,a.name," - ",a.birthday),l.a.createElement(q,null,a.events.map(function(a){return l.a.createElement("div",{className:a.isSaved?"list-group-item list-group-item-action list-group-flush list-group-item-success":"list-group-item list-group-item-action list-group-flush list-group-item-light",key:a._id},l.a.createElement("div",{onClick:function(){return e.toggleIsSaved(a)}},l.a.createElement("input",{type:"checkbox",defaultChecked:a.isSaved}),a.title," - ",a.summary))})))})):l.a.createElement("h3",null,"No Results to Display"))))}}]),a}(n.Component);t(66);var Y=function(e){return l.a.createElement("span",Object.assign({className:"delete-btn"},e,{role:"button",tabIndex:"0"}),"\u2717")},G=(t(67),function(e){function a(){var e,t;Object(I.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(R.a)(this,(e=Object(L.a)(a)).call.apply(e,[this].concat(l)))).state={people:[],name:"",birthday:""},t.loadFamily=function(){f.getFamily({email:v.auth().currentUser.providerData[0].email}).then(function(e){return t.setState({people:e.data[0].family})}).catch(function(e){return console.log(e)})},t.deleteFamily=function(e){f.deleteFamily({email:v.auth().currentUser.providerData[0].email,id:e}).then(function(e){return t.loadFamily()}).catch(function(e){return console.log(e)})},t.collectEvents=function(e){e.preventDefault(),f.scrapeFamily({email:v.auth().currentUser.providerData[0].email}).then(function(e){return t.loadFamily()}).catch(function(e){return console.log(e)})},t.handleInputChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(u.a)({},n,l))},t.handleFormSubmit=function(e){e.preventDefault(),t.state.name&&t.state.birthday&&f.saveFamily({userEmail:v.auth().currentUser.providerData[0].email,name:t.state.name,birthday:t.state.birthday}).then(function(e){t.loadFamily(),t.collectEvents()}).catch(function(e){return console.log(e)})},t}return Object(M.a)(a,e),Object(B.a)(a,[{key:"componentDidMount",value:function(){console.log("componentDidMount for family page called.."),console.log("userEmail: "+te),te&&this.loadFamily()}},{key:"render",value:function(){var e=this;return l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12"},l.a.createElement(O,null,l.a.createElement("h1",null,"Add Family Members")),l.a.createElement("form",null,l.a.createElement(y,{onChange:this.handleInputChange,name:"name",placeholder:"Name (required)"}),l.a.createElement(y,{onChange:this.handleInputChange,name:"birthday",placeholder:"Birthday in ISO 8601 date format (required)"}),l.a.createElement(w,{disabled:!(this.state.name&&this.state.birthday),onClick:this.handleFormSubmit},"Add Family Member")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"collectEvents"},l.a.createElement("form",{onSubmit:this.collectEvents},this.state.people.length?l.a.createElement(P,null,this.state.people.map(function(a){return l.a.createElement(z,{key:a._id},l.a.createElement("strong",null,a.name," - ",a.birthday),l.a.createElement(Y,{onClick:function(){return e.deleteFamily(a._id)}}))})):l.a.createElement("h3",null,"No Results to Display"),l.a.createElement("div",{style:W},l.a.createElement(w,{disbled:"false",type:"submit"},"Collect Events")))))))}}]),a}(n.Component)),W={margin:"1em 0 0 0.25em"},$=G,Q=(t(26),function(e){function a(){var e,t;Object(I.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(R.a)(this,(e=Object(L.a)(a)).call.apply(e,[this].concat(l)))).state={people:[]},t.loadFamily=function(){f.getUserPlus({email:v.auth().currentUser.providerData[0].email}).then(function(e){return t.setState({people:e.data[0].family})}).catch(function(e){return console.log(e)})},t.loadFamilyAndEvents=function(){f.getAnswerKey().then(function(e){return t.setState({people:e.data,name:"",birthday:""})}).catch(function(e){return console.log(e)})},t}return Object(M.a)(a,e),Object(B.a)(a,[{key:"componentDidMount",value:function(){v.auth().currentUser&&this.loadFamily()}},{key:"render",value:function(){return l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12 sm-12"},l.a.createElement(O,null,l.a.createElement("h1",null,"Answer Key")),this.state.people.length?l.a.createElement(Z,null,this.state.people.map(function(e){return l.a.createElement(H,{key:e._id},l.a.createElement("strong",null,e.name," - ",e.birthday),l.a.createElement(Z,null,e.events.map(function(e){return e.isSaved?l.a.createElement(H,{key:e._id},l.a.createElement("div",{className:"event-saved"},e.title," - ",e.summary)):null})))})):l.a.createElement("h3",null,"No Results to Display"))))}}]),a}(n.Component)),V=function(e){function a(){var e,t;Object(I.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(R.a)(this,(e=Object(L.a)(a)).call.apply(e,[this].concat(l)))).state={events:[]},t.loadEvents=function(){f.getEvents({email:v.auth().currentUser.providerData[0].email}).then(function(e){return t.setState({events:e.data})}).catch(function(e){return console.log(e)})},t}return Object(M.a)(a,e),Object(B.a)(a,[{key:"componentDidMount",value:function(){v.auth().currentUser&&this.loadEvents()}},{key:"render",value:function(){return l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12 sm-12"},l.a.createElement(O,null,l.a.createElement("h1",null,"Something To Talk About")),this.state.events.length?l.a.createElement(Z,null,this.state.events.map(function(e){return l.a.createElement(H,{key:e._id},l.a.createElement("a",{style:X,className:"event-saved",href:e.link,target:"_blank",rel:"noopener noreferrer"},e.title," - ",e.summary))})):l.a.createElement("h3",null,"No Results to Display"))))}}]),a}(n.Component),X={color:"black"},ee=V;var ae=function(){var e=l.a.useContext(ne).isLogged;return l.a.createElement("nav",{className:"navbar fixed-top navbar-expand-lg navbar-dark bg-info"},l.a.createElement("a",{className:"navbar-brand",href:"/add"},"Family Reunion Helper"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown"},l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item active"},e?null:l.a.createElement(j.a,{className:"Nav_link",to:"/signup"},"Sign Up")),l.a.createElement("li",{className:"nav-item"},e?null:l.a.createElement(j.a,{className:"Nav_link",to:"/login"},"Login")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(j.a,{className:"Nav_link",to:"/add"},"Family")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(j.a,{className:"Nav_link",to:"/cull"},"Cull Events")),l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"/",id:"navbarDropdownMenuLink",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Reports"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},l.a.createElement(j.a,{className:"Nav_link_drop",to:"/reportanswerkey"},"Report Answer Key"),l.a.createElement("br",null),l.a.createElement(j.a,{className:"Nav_link_drop",to:"/reporthandout"},"Report Handout"))),e?l.a.createElement("form",{className:"form-inline"},l.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",type:"button",onClick:function(){return v.auth().signOut()}}," ","Sign out")):null)))},te="",ne=l.a.createContext(null);var le=function(){var e=l.a.useState(!1),a=Object(s.a)(e,2),t=a[0],n=a[1];return l.a.useEffect(function(){v.auth().onAuthStateChanged(function(e){e?(console.log(e),n(!0),te=e.email,console.log("isLogged: "+t+" userEmail:'"+te+"'")):(console.log("user logged out!"),n(!1),te="")})},[]),l.a.createElement(ne.Provider,{value:{isLogged:t,setIsLogged:n}},l.a.createElement(i.a,null,l.a.createElement("div",null,l.a.createElement(ae,null),l.a.createElement("div",{className:"page__content-container"},l.a.createElement(c.a,{exact:!0,path:"/signup",component:_}),l.a.createElement(c.a,{exact:!0,path:"/login",component:D}),l.a.createElement(c.a,{exact:!0,path:"/add",component:$}),l.a.createElement(c.a,{extract:!0,path:"/cull",component:J}),l.a.createElement(c.a,{exact:!0,path:"/reportanswerkey",component:Q}),l.a.createElement(c.a,{exact:!0,path:"/reporthandout",component:ee})))))};o.a.render(l.a.createElement(le,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.41b3189f.chunk.js.map
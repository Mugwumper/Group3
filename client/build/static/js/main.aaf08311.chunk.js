(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,a,t){},25:function(e,a,t){e.exports=t(63)},53:function(e,a,t){},54:function(e,a,t){},58:function(e,a,t){},59:function(e,a,t){},60:function(e,a,t){},61:function(e,a,t){},62:function(e,a,t){},63:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(22),o=t.n(r),s=t(3),c=t(65),i=t(24),u=t(7),m=t(9),d=t(4),p=t.n(d),f={getFamily:function(e){return p.a.post("/api/family/getfamily",e)},getFamilyMember:function(e){return p.a.get("/api/family/"+e)},deleteFamily:function(e){return p.a.post("/api/family/delete",e)},saveFamily:function(e){return p.a.post("/api/family",e)},login:function(e){return console.log("API sees login..."),console.log(e),p.a.post("/api/user/login",e)},setUser:function(e){return console.log("API sees setUser..."),console.log(e),p.a.post("/api/family/setuser",e)},newUser:function(e){return p.a.post("/api/user/new",e)},scrapeFamily:function(e){return p.a.post("/api/family/scrape",e)},toggleIsSaved:function(e){return p.a.put("/api/events/toggle",e)},getEvents:function(e){return p.a.post("/api/events/saved",e)},getAnswerKey:function(){return p.a.get("/api/events/answerkey")},getUserPlus:function(e){return p.a.post("/api/user/getuserplus",e)}},g=t(48);t(51);var v=g.initializeApp({apiKey:"AIzaSyAtA9G5LKdN9d-Gq_aEAeMTH2bM_2J6Amg",authDomain:"family-reunion-helper.firebaseapp.com",databaseURL:"https://family-reunion-helper.firebaseio.com",projectId:"family-reunion-helper",storageBucket:"family-reunion-helper.appspot.com",messagingSenderId:"169387949450",appId:"1:169387949450:web:5826302c59bd3deef51c73"}),E=function(e,a){return v.auth().signInWithEmailAndPassword(e,a).then(function(e){console.log(e),console.log(v.auth().currentUser.providerData[0].email)}).catch(function(e){var a=e.message;console.log(a),alert(a)})};var h=function(e,a){var t=l.a.useState(e),n=Object(s.a)(t,2),r=n[0],o=n[1],c=l.a.useState({}),i=Object(s.a)(c,2),d=i[0],p=i[1],g=l.a.useState(!1),E=Object(s.a)(g,2),h=E[0],b=E[1],w=l.a.useState(!0),y=Object(s.a)(w,2),N=y[0],S=y[1];return l.a.useEffect(function(){var e=Boolean(d.email),a=Boolean(d.password),t=!e&&!a,n=r.email&&r.password;h?t?(console.log("Authenticated!",r.email,r.password),console.log(v.auth().user),f.login({email:v.auth().user.email,password:r.password}).then(function(e){200===e.status&&null==e.data[0]?f.NewUser({email:r.email,password:r.password}).then(function(e){console.log(e.data)}).catch({}):e.data[0].password===r.password?console.log("valid"):console.log("NOT valid: "+e.data[0].password+"<>"+r.password)}).catch(function(e){return console.log(e)}),b(!1)):b(!1):S(!t||!n)},[d,h,N,r.password,r.email]),{handleSubmit:function(e){e.preventDefault();var t=a(r);p(t),b(!0)},handleChange:function(e){if(o(Object(m.a)({},r,Object(u.a)({},e.target.name,e.target.value))),d.email||d.password){var t=a(r);p(t)}},handleBlur:function(){var e=a(r);p(e)},errors:d,isSubmitting:h,cantSub:N,values:r}};function b(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required Email",e.password?e.password.length<6&&(a.password="Password must be at least 6 characters"):a.password="Required Password",a}function w(e){return l.a.createElement("div",{className:"form-group"},l.a.createElement("input",Object.assign({className:"form-control"},e)))}function y(e){return l.a.createElement("button",Object.assign({},e,{style:{float:"right",marginBottom:10,marginLeft:10},className:"btn btn-success"}),e.children)}function N(e){var a=e.fluid,t=e.children;return l.a.createElement("div",{className:"container".concat(a?"-fluid":"")},t)}function S(e){var a=e.fluid,t=e.children;return l.a.createElement("div",{className:"row".concat(a?"-fluid":"")},t)}function k(e){var a=e.size,t=e.children;return l.a.createElement("div",{className:a.split(" ").map(function(e){return"col-"+e}).join(" ")},t)}t(53);var C=function(e){var a=e.children;return l.a.createElement("div",{style:{height:100,clear:"both",paddingTop:15},className:"jumbotron"},a)},x=t(66),D=(t(54),{email:"",password:""});var U=function(e){var a=function(a,t,n){a&&a.preventDefault(),E(t,n).then(function(a){v.auth().currentUser.providerData[0].email&&e.history.push("/add")})},t=h(D,b),n=t.handleChange,r=t.handleBlur,o=t.errors,s=t.cantSub,c=t.values;return l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12"},l.a.createElement(C,null,l.a.createElement("h1",null,"Login")),l.a.createElement("form",null,l.a.createElement(w,{onChange:n,onBlur:r,name:"email",value:c.email,autoComplete:"off",placeholder:"Your email address",style:o.email?{border:"1px solid red",marginBottom:"0rem"}:{border:"1px solid #ced4da",marginBottom:"0rem"}}),l.a.createElement("div",{className:"errorText"},o.email?l.a.createElement("p",null,o.email):l.a.createElement("p",null,"\xa0")),l.a.createElement(w,{onChange:n,onBlur:r,name:"password",type:"password",value:c.password,placeholder:"Choose a safe password",style:o.password?{border:"1px solid red"}:{border:"1px solid #ced4da"}}),l.a.createElement("div",{className:"errorText"},o.password?l.a.createElement("p",null,o.password):l.a.createElement("p",null,"\xa0")),l.a.createElement("div",null,l.a.createElement(y,{onClick:function(e){return a(e,c.email,c.password)},disabled:s,type:"submit"},"Submit")),l.a.createElement("button",{type:"button",onClick:function(){a(null,"crystal@bell.com","1234567")}},'login "crystal"'),l.a.createElement("button",{type:"button",onClick:function(){a(null,"wwovno@sfsd.com","1234567")}},'login "wwovno@sfsd.com"')),l.a.createElement(x.a,{to:"/signup"},"Sign Up"))))};var O=function(e,a){var t=l.a.useState(e),n=Object(s.a)(t,2),r=n[0],o=n[1],c=l.a.useState({}),i=Object(s.a)(c,2),d=i[0],p=i[1],g=l.a.useState(!1),v=Object(s.a)(g,2),E=v[0],h=v[1],b=l.a.useState(!0),w=Object(s.a)(b,2),y=w[0],N=w[1];return l.a.useEffect(function(){var e=Boolean(d.email),a=Boolean(d.password),t=!e&&!a,n=r.email&&r.password;E?t?(console.log("Authenticated!",r.email,r.password),f.login({email:r.email,password:r.password}).then(function(e){200===e.status&&null==e.data[0]?f.NewUser({email:r.email,password:r.password}).then(function(e){console.log(e.data)}).catch({}):e.data[0].password===r.password?(console.log("valid"),f.setUser({id:e.data[0]._id})):console.log("NOT valid: "+e.data[0].password+"<>"+r.password)}).catch(function(e){return console.log(e)}),h(!1)):h(!1):N(!t||!n)},[d,E,y,r.password,r.email]),{handleSubmit:function(e){e.preventDefault();var t=a(r);p(t),h(!0)},handleChange:function(e){if(o(Object(m.a)({},r,Object(u.a)({},e.target.name,e.target.value))),d.email||d.password){var t=a(r);p(t)}},handleBlur:function(){var e=a(r);p(e)},errors:d,isSubmitting:E,cantSub:y,values:r}};function j(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required Email",e.password?e.password.length<6&&(a.password="Password must be at least 6 characters"):a.password="Required Password",a}t(58);var A={email:"",password:""},_=function(e,a,t){e.preventDefault(),function(e,a){return v.auth().createUserWithEmailAndPassword(e,a).then(function(e){console.log(e),console.log(v.auth()),console.log(v.auth().currentUser)}).catch(function(e){console.log(e)})}(a,t).then(f.newUser({email:a}).then(function(e){console.log(e.data)}))};var B=function(e){var a=O(A,j),t=a.handleChange,n=a.handleBlur,r=a.errors,o=a.cantSub,s=a.values;return l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12"},l.a.createElement(C,null,l.a.createElement("h1",null,"Sign Up")),l.a.createElement("form",null,l.a.createElement(w,{onChange:t,onBlur:n,name:"email",value:s.email,autoComplete:"off",placeholder:"Your email address",style:r.email?{border:"1px solid red",marginBottom:"0rem"}:{border:"1px solid #ced4da",marginBottom:"0rem"}}),l.a.createElement("div",{className:"errorText"},r.email?l.a.createElement("p",null,r.email):l.a.createElement("p",null,"\xa0")),l.a.createElement(w,{onChange:t,onBlur:n,name:"password",type:"password",value:s.password,placeholder:"Choose a safe password",style:r.password?{border:"1px solid red"}:{border:"1px solid #ced4da"}}),l.a.createElement("div",{className:"errorText"},r.password?l.a.createElement("p",null,r.password):l.a.createElement("p",null,"\xa0")),l.a.createElement("div",null,l.a.createElement(y,{onClick:function(e){return _(e,s.email,s.password)},disabled:o,type:"submit"},"Submit"))),l.a.createElement(x.a,{to:"/login"},"Login"))))};t(59);function F(e){var a=e.children;return l.a.createElement("div",{className:"list-overflow-container",style:L},l.a.createElement("ul",{className:"list-group"},a))}var L={border:"1px #DDDDDD solid",overflowY:"scroll"};function I(e){var a=e.children;return l.a.createElement("li",{className:"list-group-item"},a)}function R(e){var a=e.children;return l.a.createElement("div",{className:"list-overflow-container"},l.a.createElement("ul",{className:"list-group list-group-flush"},a))}function P(e){var a=e.children;return l.a.createElement("li",{className:"list-group-item"},a)}function T(e){var a=e.children;return l.a.createElement("div",{className:"list-group"},l.a.createElement("div",{className:"list-group-item-action active"},a))}function z(e){var a=e.children;return l.a.createElement("div",{className:"list-group-item list-group-item-action"},a)}t(60);var q=function(){var e=l.a.useContext(Q).isLogged,a=l.a.useState([]),t=Object(s.a)(a,2),n=t[0],r=t[1];function o(){f.getUserPlus({email:v.auth().currentUser.providerData[0].email}).then(function(e){return r(e.data[0].family)}).catch(function(e){return console.log(e)})}return l.a.useEffect(function(){v.auth().currentUser&&o()},[e]),l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12 sm-12"},l.a.createElement(C,null,l.a.createElement("h1",null,"Cull Events"),l.a.createElement("p",null,"Select events to include")),n.length?l.a.createElement(R,null,n.map(function(e){return l.a.createElement(P,{key:e._id},l.a.createElement("strong",null,e.name," - ",e.birthday),l.a.createElement(R,null,e.events.map(function(e){return l.a.createElement("div",{className:e.isSaved?"list-group-item list-group-item-action list-group-flush list-group-item-success":"list-group-item list-group-item-action list-group-flush list-group-item-light",key:e._id},l.a.createElement("div",{onClick:function(){return(a=e).isSaved=!a.isSaved,void f.toggleIsSaved(a).then(function(e){return o()}).catch(function(e){return console.log(e)});var a}},l.a.createElement("input",{type:"checkbox",defaultChecked:e.isSaved}),e.title," - ",e.summary))})))})):l.a.createElement("h3",null,"No Results to Display"))))};t(61);var M=function(e){return l.a.createElement("span",Object.assign({className:"delete-btn"},e,{role:"button",tabIndex:"0"}),"\u2717")},Z=(t(62),{name:"",birthday:""});var K={margin:"1em 0 0 0.25em"},H=function(){var e=l.a.useContext(Q).isLogged;console.log("localIsLogged: "+e);var a=l.a.useState([]),t=Object(s.a)(a,2),n=t[0],r=t[1],o=l.a.useState(Z),c=Object(s.a)(o,2),i=c[0],d=c[1];function p(){console.log("loadFamily called"),f.getFamily({email:v.auth().currentUser.providerData[0].email}).then(function(e){r(e.data[0].family),console.log(e.data[0].family),console.log(n)}).catch(function(e){return console.log(e)})}function g(e){d(Object(m.a)({},i,Object(u.a)({},e.target.name,e.target.value)))}return l.a.useEffect(function(){console.log("React.useEffect for family page called.."),console.log("userEmail: "+$),$&&p()},[i.name,i.birthday]),l.a.useEffect(function(){console.log("new useEffect called"),$&&p()},[e]),l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12"},l.a.createElement(C,null,l.a.createElement("h1",null,"Add Family Members")),l.a.createElement("form",null,l.a.createElement(w,{onChange:g,name:"name",placeholder:"Name (required)"}),l.a.createElement(w,{onChange:g,name:"birthday",placeholder:"Birthday in ISO 8601 date format (required)"}),l.a.createElement(y,{onClick:function(e){var a=this;e.preventDefault(),i.name&&i.birthday&&f.saveFamily({userEmail:v.auth().currentUser.providerData[0].email,name:i.name,birthday:i.birthday}).then(function(e){a.loadFamily(),a.collectEvents()}).catch(function(e){return console.log(e)})}},"Add Family Member")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"collectEvents"},l.a.createElement("form",{onSubmit:function(e){var a=this;e.preventDefault(),f.scrapeFamily({email:v.auth().currentUser.providerData[0].email}).then(function(e){return a.loadFamily()}).catch(function(e){return console.log(e)})}},n.length?l.a.createElement(F,null,n.map(function(e){return l.a.createElement(I,{key:e._id},l.a.createElement("strong",null,e.name," - ",e.birthday),l.a.createElement(M,{onClick:function(){return function(e){var a=this;f.deleteFamily({email:v.auth().currentUser.providerData[0].email,id:e}).then(function(e){return a.loadFamily()}).catch(function(e){return console.log(e)})}(e._id)}}))})):l.a.createElement("h3",null,"No Results to Display"),l.a.createElement("div",{style:K},l.a.createElement(y,{disbled:"false",type:"submit"},"Collect Events")))))))};t(21);var J=function(){var e=l.a.useContext(Q).isLogged,a=l.a.useState([]),t=Object(s.a)(a,2),n=t[0],r=t[1];return l.a.useEffect(function(){v.auth().currentUser&&f.getUserPlus({email:v.auth().currentUser.providerData[0].email}).then(function(e){return r(e.data[0].family)}).catch(function(e){return console.log(e)})},[e]),l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12 sm-12"},l.a.createElement(C,null,l.a.createElement("h1",null,"Answer Key")),n.length?l.a.createElement(T,null,n.map(function(e){return l.a.createElement(z,{key:e._id},l.a.createElement("strong",null,e.name," - ",e.birthday),l.a.createElement(T,null,e.events.map(function(e){return e.isSaved?l.a.createElement(z,{key:e._id},l.a.createElement("div",{className:"event-saved"},e.title," - ",e.summary)):null})))})):l.a.createElement("h3",null,"No Results to Display"))))};var Y={color:"black"},G=function(){var e=l.a.useContext(Q).isLogged,a=l.a.useState([]),t=Object(s.a)(a,2),n=t[0],r=t[1];return l.a.useEffect(function(){v.auth().currentUser&&f.getEvents({email:v.auth().currentUser.providerData[0].email}).then(function(e){return r(e.data)}).catch(function(e){return console.log(e)})},[e]),l.a.createElement(N,{fluid:!0},l.a.createElement(S,null,l.a.createElement(k,{size:"md-12 sm-12"},l.a.createElement(C,null,l.a.createElement("h1",null,"Something To Talk About")),n.length?l.a.createElement(T,null,n.map(function(e){return l.a.createElement(z,{key:e._id},l.a.createElement("a",{style:Y,className:"event-saved",href:e.link,target:"_blank",rel:"noopener noreferrer"},e.title," - ",e.summary))})):l.a.createElement("h3",null,"No Results to Display"))))};var W=function(){var e=l.a.useContext(Q).isLogged;return l.a.createElement("nav",{className:"navbar fixed-top navbar-expand-lg navbar-dark bg-info"},l.a.createElement("a",{className:"navbar-brand",href:"/add"},"Family Reunion Helper"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown"},l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item active"},e?null:l.a.createElement(x.a,{className:"Nav_link",to:"/signup"},"Sign Up")),l.a.createElement("li",{className:"nav-item"},e?null:l.a.createElement(x.a,{className:"Nav_link",to:"/login"},"Login")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(x.a,{className:"Nav_link",to:"/add"},"Family")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(x.a,{className:"Nav_link",to:"/cull"},"Cull Events")),l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"/",id:"navbarDropdownMenuLink",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Reports"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},l.a.createElement(x.a,{className:"Nav_link_drop",to:"/reportanswerkey"},"Report Answer Key"),l.a.createElement("br",null),l.a.createElement(x.a,{className:"Nav_link_drop",to:"/reporthandout"},"Report Handout"))),e?l.a.createElement("form",{className:"form-inline"},l.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",type:"button",onClick:function(){return v.auth().signOut()}}," ","Sign out")):null)))},$="",Q=l.a.createContext(null);var V=function(){var e=l.a.useState(!1),a=Object(s.a)(e,2),t=a[0],n=a[1];return l.a.useEffect(function(){v.auth().onAuthStateChanged(function(e){e?(console.log(e),n(!0),$=e.email,console.log("isLogged: "+t+" userEmail:'"+$+"'")):(console.log("user logged out!"),n(!1),$="")})},[]),l.a.createElement(Q.Provider,{value:{isLogged:t,setIsLogged:n}},l.a.createElement(c.a,null,l.a.createElement("div",null,l.a.createElement(W,null),l.a.createElement("div",{className:"page__content-container"},l.a.createElement(i.a,{exact:!0,path:"/signup",component:B}),l.a.createElement(i.a,{exact:!0,path:"/login",component:U}),l.a.createElement(i.a,{exact:!0,path:"/add",component:H}),l.a.createElement(i.a,{extract:!0,path:"/cull",component:q}),l.a.createElement(i.a,{exact:!0,path:"/reportanswerkey",component:J}),l.a.createElement(i.a,{exact:!0,path:"/reporthandout",component:G})))))};o.a.render(l.a.createElement(V,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.aaf08311.chunk.js.map